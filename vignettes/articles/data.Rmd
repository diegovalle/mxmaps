---
title: "Data"
output: html_document
css: css/report_styles.css
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE,
                      fig.dim = c(6, 6),
                      dpi = 100,
                      out.width = '100%')
```

The `data.frame` you provide to the plotting functions must
have a `region` column and a `value` column. The `region`
entries must be INEGI codes for states (e.g., "01", "02") or
municipios (e.g., "01001", "01002"). These codes can be
strings (with or without a leading zero) or numeric. The
package provides the `str_mxstate` and `str_mxmunicipio`
functions to easily format these codes to the INEGI
specification. The package also includes example
`data.frame` objects, such as `df_mxstate_2020` and
`df_mxmunicipio_2020`, which contain demographic variables
from the 2020 Census.

```{r}
library(mxmaps)
library(htmlTable)

data("df_mxstate_2020")
htmlTable(head(df_mxstate_2020), rnames = FALSE, col.rgroup = c("none", "#F7F7F7"))
data("df_mxmunicipio_2020")
htmlTable(head(df_mxmunicipio_2020), rnames = FALSE, col.rgroup = c("none", "#F7F7F7"))
```

## 2015 Conteo Intercensal

Additional `data.frame` objects are available with data
from other censuses and *conteos intercensales*.

```{r}
data("df_mxstate_2015")
htmlTable(head(df_mxstate_2015), rnames = FALSE, col.rgroup = c("none", "#F7F7F7"))
data("df_mxmunicipio_2015")
htmlTable(head(df_mxmunicipio_2015), rnames = FALSE, col.rgroup = c("none", "#F7F7F7"))
```

## Older Censuses

```{r}
data("df_mxstate_1990_2010")
htmlTable(head(df_mxstate_1990_2010), rnames = FALSE, col.rgroup = c("none", "#F7F7F7"))
data("df_mxmunicipio_1990_2010")
htmlTable(head(df_mxmunicipio_1990_2010), rnames = FALSE, col.rgroup = c("none", "#F7F7F7"))
```

The package includes two versions of state names and
abbreviations. This is because common usage often differs
from official names. For example, most people use "Veracruz"
instead of the full official name, "Veracruz de Ignacio de
la Llave." Similarly, the official abbreviation for Chiapas,
"Chis.", can be awkward in some Spanish speaking countries.

```{r message=FALSE,warning=FALSE}
library("geojsonio")

# Convert the topoJSON to spatial object
data(mxstate.topoJSON)
tmpdir <- tempdir()
# have to use RJSONIO or else the topojson isn't valid
write(RJSONIO::toJSON(mxstate.topoJSON), file.path(tmpdir, "state.topojson"))
states <- topojson_read(file.path(tmpdir, "state.topojson"))
```

## String conversion

```{r}
str_mxstate(c(32, 5))
str_mxmunicipio(c(32, 5), c(9, 18))
str_mxmunicipio(c(32001, 5009))
```
